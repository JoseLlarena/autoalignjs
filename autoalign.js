!function(r){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).autoalign=r()}}(function(){return function r(t,n,e){function o(i,u){if(!n[i]){if(!t[i]){var l="function"==typeof require&&require;if(!u&&l)return l(i,!0);if(a)return a(i,!0);var f=new Error("Cannot find module '"+i+"'");throw f.code="MODULE_NOT_FOUND",f}var c=n[i]={exports:{}};t[i][0].call(c.exports,function(r){var n=t[i][1][r];return o(n||r)},c,c.exports,r,t,n,e)}return n[i].exports}for(var a="function"==typeof require&&require,i=0;i<e.length;i++)o(e[i]);return o}({1:[function(r,t,n){"use strict";function e(r){if(r&&r.__esModule)return r;var t={};if(null!=r)for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);return t.default=r,t}function o(r,t,n){return.5*((r-t-n)/r+1)}Object.defineProperty(n,"__esModule",{value:!0});var a=function(){function r(r,t){var n=[],e=!0,o=!1,a=void 0;try{for(var i,u=r[Symbol.iterator]();!(e=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);e=!0);}catch(r){o=!0,a=r}finally{try{!e&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return r(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();n.alignment_cost_fn_estimator=function(r,t,n){for(var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(r){return r},o=r.length,l=u.vocab_sizes(r),f=t,c=t,v=y,s=new u.Stats;;){var h=0,d=!0,m=!1,_=void 0;try{for(var g,b=r[Symbol.iterator]();!(d=(g=b.next()).done);d=!0){var p=a(g.value,2),w=p[0],S=p[1],x=i.grid(w,S,c);h+=x[S.length][w.length];var M=i.all_alignments(w,S,c,x),P=!0,E=!1,O=void 0;try{for(var j,A=M[Symbol.iterator]();!(P=(j=A.next()).done);P=!0){var I=j.value;s=u.joint_stats_from_alignment(I,s,M.length)}}catch(r){E=!0,O=r}finally{try{!P&&A.return&&A.return()}finally{if(E)throw O}}e("alignment",M[0])}}catch(r){m=!0,_=r}finally{try{!d&&b.return&&b.return()}finally{if(m)throw _}}if(h/=o,e("cost",h),h>=v)return f;f=c,c=n(u.smoothed_stats(s,l),l),v=h,s.reset()}},n.padding_cost_fn_estimator=function(r,t){var n=new u.Stats,e=!0,o=!1,i=void 0;try{for(var l,f=r[Symbol.iterator]();!(e=(l=f.next()).done);e=!0){var c=a(l.value,2),v=c[0],s=c[1],y=v.length,d=s.length,m=y>=d?v:v.concat(h.slice(0,d-y)),_=d>=y?s:s.concat(h.slice(0,y-d));n=u.joint_stats_from_alignment([m,_],n)}}catch(r){o=!0,i=r}finally{try{!e&&f.return&&f.return()}finally{if(o)throw i}}var g=u.vocab_sizes(r);return t(u.smoothed_stats(n,g),g)},n.uniform_cost_fn_estimator=function(r,t){var n=new u.Stats,e=!0,o=!1,l=void 0;try{for(var c,s=r[Symbol.iterator]();!(e=(c=s.next()).done);e=!0){var y=a(c.value,2),h=y[0],d=y[1],m=h.length,_=d.length;if(m>=_)for(var g=m/_,b=.5*g,p=0;p<m;p++){for(var w=p+.5,S=0;S<_;S++){var x=S*g+b;n[h[p]+u.SEP+d[S]]=(n[h[p]+u.SEP+d[S]]||0)+1/f(v(w-x)+1,2)}m>_&&(n[h[p]+u.SEP+i.GAP]=(m-_)/m)}else for(var M=_/m,P=.5*M,E=0;E<_;E++)for(var O=E+.5,j=0;j<m;j++){var A=j*M+P;n[h[j]+u.SEP+d[E]]=(n[h[j]+u.SEP+d[E]]||0)+1/f(v(A-O)+1,2),n[i.GAP+u.SEP+h[j]]=(_-m)/_}}}catch(r){o=!0,l=r}finally{try{!e&&s.return&&s.return()}finally{if(o)throw l}}var I=u.vocab_sizes(r);return t(u.smoothed_stats(n,I),I)},n.pmi_cost_fn_from=function(r,t){function n(r,t){var e=p[r+u.SEP+t],o=w[r],a=S[t],i=b(d(e)?D:e,d(o)?U:o,d(a)?V:a);return n.max_cost=c(n.max_cost,i),i}var e=a(r,5),i=e[0],f=e[1],v=e[2],y=e[3],h=e[4],m=a(t,3),_=(m[0],m[1]),g=m[2],b=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o,p={},w={},S={},x=!0,M=!1,P=void 0;try{for(var E,O=i.keys()[Symbol.iterator]();!(x=(E=O.next()).done);x=!0){var j=E.value;p[j]=l(i[j]/h)}}catch(r){M=!0,P=r}finally{try{!x&&O.return&&O.return()}finally{if(M)throw P}}var A=!0,I=!1,N=void 0;try{for(var k,z=f.keys()[Symbol.iterator]();!(A=(k=z.next()).done);A=!0){var T=k.value;w[T]=l(f[T]/h)}}catch(r){I=!0,N=r}finally{try{!A&&z.return&&z.return()}finally{if(I)throw N}}var F=!0,G=!1,q=void 0;try{for(var Y,B=v.keys()[Symbol.iterator]();!(F=(Y=B.next()).done);F=!0){var C=Y.value;S[C]=l(v[C]/h)}}catch(r){G=!0,q=r}finally{try{!F&&B.return&&B.return()}finally{if(G)throw q}}var D=l(y/h),U=l(y/h*g),V=l(y/h*_);return n.max_cost=s,n},n.npmi=o,n.pmi=function(r,t,n){return-((arguments.length>3&&void 0!==arguments[3]?arguments[3]:2)*r-t-n)};var i=e(r("./edit")),u=e(r("./stats")),l=Math.log,f=Math.pow,c=(Math.min,Math.max),v=Math.abs,s=Number.NEGATIVE_INFINITY,y=Number.POSITIVE_INFINITY,h=new Array(1e3).fill(i.GAP),d=function(r){return void 0===r}},{"./edit":2,"./stats":5}],2:[function(r,t,n){"use strict";function e(r){if(Array.isArray(r)){for(var t=0,n=Array(r.length);t<r.length;t++)n[t]=r[t];return n}return Array.from(r)}function o(r,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[[],[]],u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:r.length,f=arguments.length>6&&void 0!==arguments[6]?arguments[6]:t.length;if(0===u&&0===f)return[i];var s=i[0],y=i[1],h=[];if(0===u){for(var d=f;d>0;d--)s.unshift(v),y.unshift(t[d-1]);h.push(i)}else if(0===f){for(var m=u;m>0;m--)s.unshift(r[m-1]),y.unshift(v);h.push(i)}else l(o[f][u]-o[f-1][u-1]-n(r[u-1],t[f-1]))<c&&h.push.apply(h,e(a(r,t,n,o,s,y,u-1,f-1,r[u-1],t[f-1]))),l(o[f][u]-o[f-1][u]-n(v,t[f-1]))<c&&h.push.apply(h,e(a(r,t,n,o,s,y,u,f-1,v,t[f-1]))),l(o[f][u]-o[f][u-1]-n(r[u-1],v))<c&&h.push.apply(h,e(a(r,t,n,o,s,y,u-1,f,r[u-1],v)));return h}function a(r,t,n,e,a,i,u,l,f,c){var v=a.slice(),s=i.slice();return v.unshift(f),s.unshift(c),o(r,t,n,e,[v,s],u,l)}Object.defineProperty(n,"__esModule",{value:!0}),n.grid=function(r,t,n){for(var e=r.length+1,o=t.length+1,a=Array.from({length:o},function(r){return new f(e)}),i=1;i<o;i++)a[i][0]=a[i-1][0]+n(v,t[i-1]);for(var l=1;l<e;l++){a[0][l]=a[0][l-1]+n(r[l-1],v);for(var c=1;c<o;c++)a[c][l]=u(a[c-1][l-1]+n(r[l-1],t[c-1]),a[c-1][l]+n(v,t[c-1]),a[c][l-1]+n(r[l-1],v))}return a},n.all_alignments=o;var i=n.GAP="Â·",u=Math.min,l=(Math.max,Math.abs),f=(Math.floor,Math.ceil,Float32Array),c=1e-5,v=i},{}],3:[function(r,t,n){"use strict";function e(r,t,n){return t in r?Object.defineProperty(r,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[t]=n,r}t.exports=function(){var r=Object.keys,t=Math.log,n=Math.exp,o=Math.sqrt,a=Math.abs,i=function(r){return r*r},u=function(r){return void 0===r},l={simple:function(t){for(var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1.96,f=r(t).sort(function(r,t){return+r>+t?1:+r<+t?-1:0}),c=f.length,v=l._log_regression(l._count_avg_freq(t,f,c)),s={0:t[1]||0},y=0,h=0,d=0,m=!1;d<c;d++){var _=+f[d],g=t[_],b=(_+1)*v(_+1)/v(_);if(m)s[_]=b;else if(u(t[_+1]))s[_]=b,m=!0;else if(!m){var p=t[_+1],w=(_+1)*p/g;a(w-b)<=e*o(i(_+1)*p/i(g)*(1+p/g))?(s[_]=b,m=!0):s[_]=w}y+=_*g,h+=s[_]*g}return!0===n?l._as_stg_probs(s,f,c,y,h):s},_as_stg_probs:function(r,t,n,e,o){r[0]/=e;for(var a=(1-r[0])/o,i=0;i<n;i++){var u=+t[i];r[u]=a*r[u]}return r},_count_avg_freq:function(r,t,n){for(var o=e({},t[0],r[t[0]]/(.5*t[1])),a=1;a<n-1;a++){var i=t[a];o[i]=r[i]/(.5*(t[a+1]-t[a-1]))}return o[t[n-1]]=r[t[n-1]]/(t[n-1]-t[n-2]),o},_log_regression:function(e){var o=r(e),a=0,i=0,u=0,l=0,f=!0,c=!1,v=void 0;try{for(var s,y=o[Symbol.iterator]();!(f=(s=y.next()).done);f=!0){var h=s.value,d=t(+h),m=t(e[h]);a+=d,i+=m,l+=d*m,u+=d*d}}catch(r){c=!0,v=r}finally{try{!f&&y.return&&y.return()}finally{if(c)throw v}}var _=o.length,g=((l/=_)-(a/=_)*(i/=_))/((u/=_)-a*a),b=i-g*a;return function(r){return n(b+g*t(r))}}};return l}()},{}],4:[function(r,t,n){"use strict";function e(r){if(r&&r.__esModule)return r;var t={};if(null!=r)for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);return t.default=r,t}function o(r,t,n,e){return 1-n/(v(r,t)*e)}Object.defineProperty(n,"__esModule",{value:!0}),n.BY_ALPHA=n.BY_SCORE=n.GAP=void 0;var a=function(){function r(r,t){var n=[],e=!0,o=!1,a=void 0;try{for(var i,u=r[Symbol.iterator]();!(e=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);e=!0);}catch(r){o=!0,a=r}finally{try{!e&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return r(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=r("./edit");Object.defineProperty(n,"GAP",{enumerable:!0,get:function(){return i.GAP}});var u=r("./stats");Object.keys(u).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(n,r,{enumerable:!0,get:function(){return u[r]}})});var l=r("./cost-functions");Object.keys(l).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(n,r,{enumerable:!0,get:function(){return l[r]}})}),n.autoalign=function(r,t,n){var e=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(r){return r},i=t(r,n),u=c.alignment_cost_fn_estimator(r,i,n,e);return r.map(function(r){var t=a(r,2),n=t[0],e=t[1],i=f.grid(n,e,u),l=a(f.all_alignments(n,e,u,i)[0],2),c=l[0],v=l[1],s=i[i.length-1][i[0].length-1];return[c,v,o(c.length,v.length,s,u.max_cost)]})},n.csv_text_from_alignments=function(r){var t="",n=!0,e=!1,o=void 0;try{for(var i,u=r[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var l=a(i.value,3),f=l[0],c=l[1],v=l[2];t+=f.join(" ")+", "+c.join(" ")+", "+v+"\n"}}catch(r){e=!0,o=r}finally{try{!n&&u.return&&u.return()}finally{if(e)throw o}}return t},n.pretty_text_from_alignments=function(r){var t=new Array(10).fill(" ").join(""),n=function(r){return r.join(" ").replace(/\,/g,":")},e=function(r){return r.toString().replace(/\,/g,":")},o=function(r,n){return r.length<n.length?r+t.slice(0,n.length-r.length):r},i="",u=new Intl.NumberFormat([],{minimumFractionDigits:2,maximumFractionDigits:2}),l=!0,f=!1,c=void 0;try{for(var v,s=r[Symbol.iterator]();!(l=(v=s.next()).done);l=!0)!function(){var r=a(v.value,3),t=r[0],l=r[1],f=r[2];i+=u.format(f)+" "+n(t.map(function(r,t){return o(e(r),e(l[t]))}))+"\n     "+n(l.map(function(r,n){return o(e(r),e(t[n]))}))+"\n\n"}()}catch(r){f=!0,c=r}finally{try{!l&&s.return&&s.return()}finally{if(f)throw c}}return i};var f=e(i),c=e(l),v=(n.BY_SCORE=function(r,t){return t[2]-r[2]},n.BY_ALPHA=function(r,t){return r[0]-t[0]},Math.max)},{"./cost-functions":1,"./edit":2,"./stats":5}],5:[function(r,t,n){"use strict";function e(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}function o(r,t){var n=r.keys(),e=new d,o=new d,a=new d,i=t[0],l=!0,f=!1,c=void 0;try{for(var s,y=n[Symbol.iterator]();!(l=(s=y.next()).done);l=!0){var h=s.value,m=t[r[h]];e[h]=m,i+=m;var _=h.split(v),g=u(_,2),b=g[0],p=g[1];o.inc(b,m),a.inc(p,m)}}catch(r){f=!0,c=r}finally{try{!l&&y.return&&y.return()}finally{if(f)throw c}}return[e,o,a,i]}function a(r,t,n){var e=u(r,3),o=e[0],a=e[1],i=e[2],l=u(t,3),f=l[0],c=l[1],d=l[2],_=o.size(),g=(n||m)/(f-_);o[s]=g;var b={},p={},w=!0,S=!1,x=void 0;try{for(var M,P=o.keys()[Symbol.iterator]();!(w=(M=P.next()).done);w=!0){var E=M.value.split(v),O=u(E,2),j=O[0],A=O[1];h(p[A])&&(p[A]=new Set),p[A].add(j),h(b[j])&&(b[j]=new Set),b[j].add(A)}}catch(r){S=!0,x=r}finally{try{!w&&P.return&&P.return()}finally{if(S)throw x}}var I=!0,N=!1,k=void 0;try{for(var z,T=a.keys()[Symbol.iterator]();!(I=(z=T.next()).done);I=!0){j=z.value;a.inc(j,(d-(j===y)-b[j].size)*g)}}catch(r){N=!0,k=r}finally{try{!I&&T.return&&T.return()}finally{if(N)throw k}}var F=!0,G=!1,q=void 0;try{for(var Y,B=i.keys()[Symbol.iterator]();!(F=(Y=B.next()).done);F=!0){A=Y.value;i.inc(A,(c-(A===y)-p[A].size)*g)}}catch(r){G=!0,q=r}finally{try{!F&&B.return&&B.return()}finally{if(G)throw q}}return[o,a,i,g]}function i(r){var t=new d,n=!0,e=!1,o=void 0;try{for(var a,i=r.keys()[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var u=r[a.value];t.inc(u)}}catch(r){e=!0,o=r}finally{try{!n&&i.return&&i.return()}finally{if(e)throw o}}return t}Object.defineProperty(n,"__esModule",{value:!0}),n.Stats=n.UNSEEN=n.SEP=void 0;var u=function(){function r(r,t){var n=[],e=!0,o=!1,a=void 0;try{for(var i,u=r[Symbol.iterator]();!(e=(i=u.next()).done)&&(n.push(i.value),!t||n.length!==t);e=!0);}catch(r){o=!0,a=r}finally{try{!e&&u.return&&u.return()}finally{if(o)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return r(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){function r(r,t){for(var n=0;n<t.length;n++){var e=t[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(r,e.key,e)}}return function(t,n,e){return n&&r(t.prototype,n),e&&r(t,e),t}}();n.vocab_sizes=function(r){var t=new Set,n=!0,e=!1,o=void 0;try{for(var a,i=r[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var l=u(a.value,2),f=l[0],c=l[1],s=!0,y=!1,h=void 0;try{for(var d,m=f[Symbol.iterator]();!(s=(d=m.next()).done);s=!0){var _=d.value,g=!0,b=!1,p=void 0;try{for(var w,S=c[Symbol.iterator]();!(g=(w=S.next()).done);g=!0){var x=w.value;t.add(_+v+x)}}catch(r){b=!0,p=r}finally{try{!g&&S.return&&S.return()}finally{if(b)throw p}}}}catch(r){y=!0,h=r}finally{try{!s&&m.return&&m.return()}finally{if(y)throw h}}}}catch(r){e=!0,o=r}finally{try{!n&&i.return&&i.return()}finally{if(e)throw o}}var M=new Set,P=new Set,E=!0,O=!1,j=void 0;try{for(var A,I=t[Symbol.iterator]();!(E=(A=I.next()).done);E=!0){var N=A.value.split(v),k=u(N,2),z=k[0],T=k[1];M.add(z),P.add(T)}}catch(r){O=!0,j=r}finally{try{!E&&I.return&&I.return()}finally{if(O)throw j}}return[(M.size+1)*(P.size+1)-1,M.size+1,P.size+1]},n.joint_stats_from_alignment=function(r,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,e=0,o=r[0].length;e<o;e++){var a=r[0][e]+v+r[1][e];t.inc(a,1/n)}return t},n.smoothed_stats=function(r,t){var n=o(r,f.simple(i(r))),e=u(n,4),l=e[0],c=e[1],v=e[2],s=e[3];return a([l,c,v],t).concat([s])},n.non_zero_smoothed_stats=o,n.with_zero_smoothing=a;var f=function(r){if(r&&r.__esModule)return r;var t={};if(null!=r)for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n]);return t.default=r,t}(r("./good-turing")),c=(Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Math.round,Math.sqrt,Math.min,Math.max,Math.floor,Math.ceil,Math.abs,Math.log,Math.pow,Object.keys),v=n.SEP="Â±",s=n.UNSEEN="Â¨Â¨Â¨",y="Â·",h=function(r){return void 0===r},d=n.Stats=function(){function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e(this,r);var n=!0,o=!1,a=void 0;try{for(var i,u=c(t)[Symbol.iterator]();!(n=(i=u.next()).done);n=!0){var l=i.value;this[l]=(this[l]||0)+t[l]}}catch(r){o=!0,a=r}finally{try{!n&&u.return&&u.return()}finally{if(o)throw a}}}return l(r,[{key:"inc",value:function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this[r]=(this[r]||0)+t,this}},{key:"size",value:function(){return this.keys().length}},{key:"reset",value:function(){var r=!0,t=!1,n=void 0;try{for(var e,o=this.keys()[Symbol.iterator]();!(r=(e=o.next()).done);r=!0)delete this[e.value]}catch(r){t=!0,n=r}finally{try{!r&&o.return&&o.return()}finally{if(t)throw n}}return this}},{key:"keys",value:function(){return c(this)}}]),r}(),m=1},{"./good-turing":3}]},{},[4])(4)});